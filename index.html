<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Demographic Analytics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#7C3AED',
                        accent: '#059669',
                        warning: '#D97706',
                        danger: '#DC2626'
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Styles */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .professional-gradient { background: linear-gradient(135deg, #5D5CDE, #7C3AED, #059669); }
        .excel-drop-zone { border: 2px dashed #5D5CDE; background: rgba(93, 92, 222, 0.05); }
        .excel-drop-zone.dragover { border-color: #059669; background: rgba(5, 150, 105, 0.1); }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">

    <!-- Dark mode detection -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Login Screen -->
    <div id="loginScreen" class="fixed inset-0 bg-gradient-to-br from-primary via-secondary to-accent flex items-center justify-center z-50">
        <div class="max-w-md w-full mx-4">
            <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-8 border border-gray-200 dark:border-gray-700 backdrop-blur-sm">
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                        <i class="fas fa-chart-pie text-white text-3xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Advanced Demographic Analytics Platform</h1>
                    <h2 class="text-lg font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">Population Informatics & Analytics</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-2">Demographic Analytics Platform</p>
                </div>
                
                <form id="loginForm">
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            <i class="fas fa-lock mr-2"></i>Access Password
                        </label>
                        <input 
                            type="password" 
                            id="passwordInput"
                            class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                            placeholder="Enter your secure password"
                            required
                        >
                    </div>
                    
                    <button 
                        type="submit"
                        class="w-full bg-gradient-to-r from-primary to-accent hover:from-purple-700 hover:to-green-600 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 shadow-lg"
                    >
                        <i class="fas fa-unlock mr-2"></i>
                        ACCESS PLATFORM
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                        Professional Demographic Analysis • Population Informatics • Statistical Modeling
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="professional-gradient text-white shadow-2xl">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="text-center">
                    <div class="w-24 h-24 mx-auto mb-4 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <i class="fas fa-chart-pie text-4xl text-white"></i>
                    </div>
                    <h1 class="text-4xl font-bold mb-2">ADVANCED DEMOGRAPHIC ANALYSIS PLATFORM</h1>
                    <p class="text-xl text-blue-100 mb-2">Population Informatics & Analytics</p>
                    <p class="text-lg text-blue-200 mb-4">• Advanced Demographic Analytics Platform</p>
                </div>
            </div>
        </header>

        <!-- Professional Credentials Banner -->
        <div class="bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="grid grid-cols-1 md:grid-cols-6 gap-4 text-center">
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-primary">MSc</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Population Informatics</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-accent">20+</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Demographic Indicators</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-warning">Excel</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Data Integration</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-info">HTML</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Web Development</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-info">Python</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Data Analysis</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-info">R</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Data Visualization</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-info">Stata</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Statistical Analysis</div>
                    </div>
                    <div class="stats-card p-4 rounded-lg">
                        <div class="text-2xl font-bold text-info">Epi Info</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Epidemiological Analysis</div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <h3 class="text-lg font-semibold">Proficiency in:</h3>
                    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
                        <li>Demographic Software</li>
                        <li>Statistical Software</li>
                        <li>Data Integration Tools</li>
                        <li>Data Visualization Tools</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-0 overflow-x-auto">
                    <button onclick="switchTab('basic-calculations')" id="basic-calculations-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-primary text-primary whitespace-nowrap">
                        <i class="fas fa-calculator mr-2"></i>Basic Calculations
                    </button>
                    <button onclick="switchTab('comprehensive-indicators')" id="comprehensive-indicators-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 whitespace-nowrap">
                        <i class="fas fa-chart-bar mr-2"></i>All Indicators
                    </button>
                    <button onclick="switchTab('population-pyramids')" id="population-pyramids-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 whitespace-nowrap">
                        <i class="fas fa-layer-group mr-2"></i>Population Pyramids
                    </button>
                    <button onclick="switchTab('life-tables')" id="life-tables-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 whitespace-nowrap">
                        <i class="fas fa-table mr-2"></i>Life Tables
                    </button>
                    <button onclick="switchTab('projections')" id="projections-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 whitespace-nowrap">
                        <i class="fas fa-crystal-ball mr-2"></i>Projections
                    </button>
                    <button onclick="switchTab('excel-tools')" id="excel-tools-tab" class="tab-button flex items-center px-6 py-4 font-medium border-b-2 border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 whitespace-nowrap">
                        <i class="fas fa-file-excel mr-2"></i>Excel Tools
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Basic Calculations Tab -->
            <div id="basic-calculations-content" class="tab-content active">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Basic Demographic Calculations</h2>
                    <p class="text-lg text-gray-600 dark:text-gray-400">Start with fundamental demographic calculations and rates</p>
                </div>

                <!-- Simple Calculators Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Crude Birth Rate -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                            <i class="fas fa-baby text-accent mr-2"></i>Crude Birth Rate
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Births</label>
                                <input type="number" id="totalBirths" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Population</label>
                                <input type="number" id="totalPopBirth" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <button onclick="calculateCBR()" class="w-full bg-accent text-white py-2 px-4 rounded-lg">Calculate CBR</button>
                            <div id="cbrResult" class="text-center font-bold text-accent text-lg"></div>
                        </div>
                    </div>

                    <!-- Net Migration Rate -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                            <i class="fas fa-plane text-accent mr-2"></i>Net Migration Rate
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Immigrants</label>
                                <input type="number" id="totalImmigrants" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Emigrants</label>
                                <input type="number" id="totalEmigrants" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Population</label>
                                <input type="number" id="totalPopMigration" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <button onclick="calculateNMR()" class="w-full bg-accent text-white py-2 px-4 rounded-lg">Calculate NMR</button>
                            <div id="nmrResult" class="text-center font-bold text-accent text-lg"></div>
                        </div>
                    </div>

                    <!-- Mortality Rate -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                            <i class="fas fa-skull-crossbones text-accent mr-2"></i>Mortality Rate
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Deaths</label>
                                <input type="number" id="totalDeaths" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Total Population</label>
                                <input type="number" id="totalPopMortality" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <button onclick="calculateMortalityRate()" class="w-full bg-accent text-white py-2 px-4 rounded-lg">Calculate Mortality Rate</button>
                            <div id="mortalityResult" class="text-center font-bold text-accent text-lg"></div>
                        </div>
                    </div>

                    <!-- SMAAM -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center">
                            <i class="fas fa-chart-line text-accent mr-2"></i>SMAAM
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Age-Specific Death Rate</label>
                                <input type="number" id="ageSpecificDeathRate" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Population in Age Group</label>
                                <input type="number" id="populationAgeGroup" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700">
                            </div>
                            <button onclick="calculateSMAAM()" class="w-full bg-accent text-white py-2 px-4 rounded-lg">Calculate SMAAM</button>
                            <div id="smaamResult" class="text-center font-bold text-accent text-lg"></div>
                        </div>
                    </div>
